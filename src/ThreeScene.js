import*as THREE from"three";import{OrbitControls}from"three/examples/jsm/controls/OrbitControls.js";import{GLTFLoader}from"three/examples/jsm/loaders/GLTFLoader.js";import{Sky}from"three/examples/jsm/objects/Sky.js";import{MathUtils,Vector3}from"three";const width=window.innerWidth,height=window.innerHeight,scene=new THREE.Scene,renderer=new THREE.WebGLRenderer({antialias:!0});renderer.setSize(width,height),renderer.shadowMap.enabled=!0,document.body.appendChild(renderer.domElement);const camera=new THREE.PerspectiveCamera(70,width/height,.1,100);camera.position.set(0,1,5);const controls=new OrbitControls(camera,renderer.domElement);controls.enableDamping=!0,controls.dampingFactor=.25,controls.screenSpacePanning=!1;const sky=new Sky;sky.scale.setScalar(45e4),scene.add(sky);const sun=new Vector3,phi=MathUtils.degToRad(90),theta=MathUtils.degToRad(180);sun.setFromSphericalCoords(1,phi,theta),sky.material.uniforms.sunPosition.value.copy(sun);const directionalLight=new THREE.DirectionalLight(16777215,.8);directionalLight.position.copy(sun).multiplyScalar(45e4),scene.add(directionalLight);const loader=new GLTFLoader;let fireTruck,edgeVehicle,currentVehicle;loader.load("/textures/fire_truck.glb",(e=>{fireTruck=e.scene,fireTruck.position.set(9.3,.05,5.5),fireTruck.scale.set(.55,.55,.55),fireTruck.rotation.y=Math.PI,fireTruck.traverse((e=>{e.isMesh&&(e.material.roughness=.6,e.material.metalness=.1)})),scene.add(fireTruck),console.log("Fire truck loaded successfully with modified materials!");const t=new THREE.AmbientLight(5263440,.4);scene.add(t);const o=new THREE.DirectionalLight(16777215,.8);o.position.set(5,5,5),scene.add(o)}),void 0,(e=>{console.error("Error loading the fire truck model:",e)})),loader.load("/textures/09_edge.glb",(e=>{edgeVehicle=e.scene,edgeVehicle.position.set(10.9,.1,-1),edgeVehicle.scale.set(5e-4,5e-4,5e-4),edgeVehicle.rotation.y=Math.PI/14,scene.add(edgeVehicle),console.log("Edge vehicle loaded successfully!")}),void 0,(e=>console.error("Error loading the edge vehicle model:",e)));const wallTexture=(new THREE.TextureLoader).load("/textures/wall.jpeg"),wallMaterial=new THREE.MeshStandardMaterial({map:wallTexture}),leftWall=new THREE.Mesh(new THREE.PlaneGeometry(5,2.5),wallMaterial);leftWall.position.set(-2.5,1.25,0),leftWall.rotation.y=Math.PI/2,scene.add(leftWall);const leftWallCloser=new THREE.Mesh(new THREE.PlaneGeometry(5,2.5),wallMaterial);leftWallCloser.position.set(-2.5,1.25,5),leftWallCloser.rotation.y=Math.PI/2,scene.add(leftWallCloser);const backWall=new THREE.Mesh(new THREE.PlaneGeometry(5,2.5),wallMaterial);backWall.position.set(0,1.25,-2.5),scene.add(backWall);const secondBackWall=new THREE.Mesh(new THREE.PlaneGeometry(1,.88),wallMaterial);secondBackWall.position.set(2.5,1.8,2.9),scene.add(secondBackWall);const tooltip=document.createElement("div");function onMouseMove(e){const t=new THREE.Vector2;t.x=e.clientX/window.innerWidth*2-1,t.y=-e.clientY/window.innerHeight*2+1;const o=new THREE.Raycaster;o.ray.origin.set(camera.position.x,camera.position.y,camera.position.z),o.ray.direction.set(t.x,t.y,1).normalize();if(o.intersectObject(fireTruck).length>0){tooltip.style.display="block";const t=tooltip.offsetWidth,o=tooltip.offsetHeight;let r=e.clientX+10,a=e.clientY+10;r+t>window.innerWidth&&(r=e.clientX-t-10),a+o>window.innerHeight&&(a=e.clientY-o-10),tooltip.style.left=`${r}px`,tooltip.style.top=`${a}px`,tooltip.innerHTML="Press 1 & 2 to Switch vehicles"}else tooltip.style.display="none"}function onMouseClick(){const e=new THREE.Raycaster;e.ray.origin.set(camera.position.x,camera.position.y,camera.position.z),e.ray.direction.set(0,0,1).normalize();e.intersectObject(fireTruck).length>0&&console.log("Truck clicked!")}tooltip.style.position="fixed",tooltip.style.backgroundColor="rgba(0, 0, 0, 0.7)",tooltip.style.color="#fff",tooltip.style.padding="5px",tooltip.style.borderRadius="3px",tooltip.style.display="none",document.body.appendChild(tooltip),window.addEventListener("mousemove",onMouseMove,!1),window.addEventListener("click",onMouseClick,!1);const toast=document.createElement("div");function showToast(e){toast.innerText=e,toast.style.display="block",setTimeout((()=>{toast.style.display="none"}),3e3)}toast.style.position="fixed",toast.style.bottom="20px",toast.style.left="50%",toast.style.transform="translateX(-50%)",toast.style.backgroundColor="rgba(0, 0, 0, 0.7)",toast.style.color="#fff",toast.style.padding="10px 20px",toast.style.borderRadius="5px",toast.style.fontSize="16px",toast.style.display="none",document.body.appendChild(toast),window.addEventListener("keydown",(e=>{"1"===e.key&&fireTruck&&(currentVehicle=fireTruck,console.log("Switched to Cyber Truck!"),showToast("Switched to Cyber Truck")),"2"===e.key&&edgeVehicle&&(currentVehicle=edgeVehicle,console.log("Switched to Edge Vehicle!"),showToast("Switched to Ford Edge"))}));const movement={forward:!1,backward:!1,left:!1,right:!1},speed=.5,rotationSpeed=.06;function setupControls(){window.addEventListener("keydown",(e=>{"s"===e.key&&(movement.forward=!0),"w"===e.key&&(movement.backward=!0),"a"===e.key&&(movement.left=!0),"d"===e.key&&(movement.right=!0)})),window.addEventListener("keyup",(e=>{"s"===e.key&&(movement.forward=!1),"w"===e.key&&(movement.backward=!1),"a"===e.key&&(movement.left=!1),"d"===e.key&&(movement.right=!1)}))}function updateMovement(){currentVehicle&&(movement.forward&&currentVehicle.translateZ(-speed),movement.backward&&currentVehicle.translateZ(speed),movement.left&&(currentVehicle.rotation.y+=rotationSpeed),movement.right&&(currentVehicle.rotation.y-=rotationSpeed))}function animateScene(){requestAnimationFrame(animateScene),updateMovement(),controls.update(),renderer.render(scene,camera)}setupControls(),animateScene();const textureLoader=new THREE.TextureLoader,floorTexture=textureLoader.load("/textures/stone.jpg"),windowTexture=textureLoader.load("/textures/window.png"),photoTexture=textureLoader.load("/textures/jj.jpeg"),rockyTexture=textureLoader.load("/textures/rocky_terrain.webp"),carpetTexture=(new THREE.TextureLoader).load("/textures/carpet.jpg"),uniqueFloorTexture=(new THREE.TextureLoader).load("/textures/driveway.jpeg"),uniqueFloorMaterial=new THREE.MeshStandardMaterial({map:uniqueFloorTexture}),uniqueFloor=new THREE.Mesh(new THREE.PlaneGeometry(5,5),uniqueFloorMaterial),drivewayTexture1=(new THREE.TextureLoader).load("/textures/driveway.jpeg"),drivewayMaterial1=new THREE.MeshStandardMaterial({map:drivewayTexture1}),drivewaySquare1=new THREE.Mesh(new THREE.PlaneGeometry(4,4),drivewayMaterial1);drivewaySquare1.rotation.x=-Math.PI/2,drivewaySquare1.rotation.z=Math.PI+Math.PI/2,drivewaySquare1.receiveShadow=!0,drivewaySquare1.position.set(10,.1,1),scene.add(drivewaySquare1);const drivewaySquare2=new THREE.Mesh(new THREE.PlaneGeometry(4,4),drivewayMaterial1);drivewaySquare2.rotation.x=-Math.PI/2,drivewaySquare2.rotation.z=Math.PI+Math.PI/2,drivewaySquare2.receiveShadow=!0,drivewaySquare2.position.set(10,.1,-3),scene.add(drivewaySquare2);const drivewaySquare3=new THREE.Mesh(new THREE.PlaneGeometry(4,4),drivewayMaterial1);drivewaySquare3.rotation.x=-Math.PI/2,drivewaySquare3.rotation.z=Math.PI+Math.PI/2,drivewaySquare3.receiveShadow=!0,drivewaySquare3.position.set(10,.1,-7),scene.add(drivewaySquare3);const drivewaySquare4=new THREE.Mesh(new THREE.PlaneGeometry(4,4),drivewayMaterial1);drivewaySquare4.rotation.x=-Math.PI/2,drivewaySquare4.rotation.z=Math.PI+Math.PI/2,drivewaySquare4.receiveShadow=!0,drivewaySquare4.position.set(13,.1,-9),scene.add(drivewaySquare4);const drivewaySquare5=new THREE.Mesh(new THREE.PlaneGeometry(4,4),drivewayMaterial1);drivewaySquare5.rotation.x=-Math.PI/2,drivewaySquare5.rotation.z=Math.PI+Math.PI/2,drivewaySquare5.receiveShadow=!0,drivewaySquare5.position.set(14,.1,-12),scene.add(drivewaySquare5);const drivewaySquare6=new THREE.Mesh(new THREE.PlaneGeometry(4,4),drivewayMaterial1);drivewaySquare6.rotation.x=-Math.PI/2,drivewaySquare6.rotation.z=Math.PI+Math.PI/2,drivewaySquare6.receiveShadow=!0,drivewaySquare6.position.set(16,.1,-14),scene.add(drivewaySquare6);const drivewaySquare7=new THREE.Mesh(new THREE.PlaneGeometry(4,3),drivewayMaterial1);drivewaySquare7.rotation.x=-Math.PI/2,drivewaySquare7.rotation.z=Math.PI+Math.PI/2,drivewaySquare7.receiveShadow=!0,drivewaySquare7.position.set(18,.1,-16.5),scene.add(drivewaySquare7);const drivewaySquare8=new THREE.Mesh(new THREE.PlaneGeometry(4,3),drivewayMaterial1);drivewaySquare8.rotation.x=-Math.PI/2,drivewaySquare8.rotation.z=Math.PI+Math.PI/2,drivewaySquare8.receiveShadow=!0,drivewaySquare8.position.set(19,.1,-16.5),scene.add(drivewaySquare8);const planeMaterial=new THREE.MeshStandardMaterial({map:rockyTexture}),planeGeometry=new THREE.PlaneGeometry(50,50),ground=new THREE.Mesh(planeGeometry,planeMaterial);ground.rotation.x=-Math.PI/2,scene.add(ground);const floorMaterial=new THREE.MeshStandardMaterial({map:floorTexture}),floor1=new THREE.Mesh(new THREE.PlaneGeometry(5,5),floorMaterial);floor1.rotation.x=-Math.PI/2,floor1.receiveShadow=!0,floor1.position.set(0,.02,0),scene.add(floor1);const floor3=floor1.clone();floor3.position.set(0,.01,5),scene.add(floor3);const floor4=floor1.clone();floor4.position.set(5,.01,5),scene.add(floor4);const floor5=floor1.clone();floor5.position.set(5,.01,0),scene.add(floor5);const carpetMaterial=new THREE.MeshStandardMaterial({map:carpetTexture}),secondFloor=new THREE.Mesh(new THREE.PlaneGeometry(5,5),carpetMaterial);secondFloor.rotation.x=-Math.PI/2,secondFloor.receiveShadow=!0,secondFloor.position.y=2.5,secondFloor.position.z=4.3,scene.add(secondFloor);const thirdTexture=(new THREE.TextureLoader).load("/textures/third.jpeg"),thirdMaterial=new THREE.MeshStandardMaterial({map:thirdTexture}),thirdFloor=new THREE.Mesh(new THREE.PlaneGeometry(4,3),thirdMaterial);thirdFloor.rotation.x=-Math.PI/2,thirdFloor.receiveShadow=!0,thirdFloor.position.y=2.9,thirdFloor.position.x=5.7,thirdFloor.position.z=7,scene.add(thirdFloor);const leftThirdFloor=new THREE.Mesh(new THREE.PlaneGeometry(4,3),thirdMaterial);leftThirdFloor.rotation.x=-Math.PI/2,leftThirdFloor.receiveShadow=!0,leftThirdFloor.position.y=3,leftThirdFloor.position.x=9,leftThirdFloor.position.z=7,scene.add(leftThirdFloor);const rightThirdFloor=new THREE.Mesh(new THREE.PlaneGeometry(4,3),thirdMaterial);rightThirdFloor.rotation.x=-Math.PI/2,rightThirdFloor.receiveShadow=!0,rightThirdFloor.position.y=3.01,rightThirdFloor.position.x=11,rightThirdFloor.position.z=7.01,scene.add(rightThirdFloor);const additionalRowFloor=new THREE.Mesh(new THREE.PlaneGeometry(4,3),thirdMaterial);additionalRowFloor.rotation.x=-Math.PI/2,additionalRowFloor.receiveShadow=!0,additionalRowFloor.position.y=3,additionalRowFloor.position.x=11,additionalRowFloor.position.z=3.99,scene.add(additionalRowFloor);const uniqueDarkTopTexture=(new THREE.TextureLoader).load("/textures/dark_top.jpg"),uniqueDarkTopMaterial=new THREE.MeshStandardMaterial({map:uniqueDarkTopTexture,side:THREE.DoubleSide}),uniqueFloorMesh=new THREE.Mesh(new THREE.PlaneGeometry(4,3),uniqueDarkTopMaterial);uniqueFloorMesh.rotation.x=-Math.PI/2,uniqueFloorMesh.position.set(5,3.9,4),uniqueFloorMesh.receiveShadow=!0,scene.add(uniqueFloorMesh);const frontWallMesh=new THREE.Mesh(new THREE.PlaneGeometry(4,2),uniqueDarkTopMaterial);function createLaser(e,t,o){const r=new THREE.LineBasicMaterial({color:o,opacity:.8,transparent:!0}),a=new THREE.BufferGeometry;a.setFromPoints([e,t]);const i=new THREE.Line(a,r);return scene.add(i),i}frontWallMesh.position.set(5,4.9,5.5),scene.add(frontWallMesh);const colors=[16711680,65280,255,16776960,16711935,65535],laserStart=new THREE.Vector3(5,4.9,5.5),lasers=[];for(let e=0;e<5;e++){const e=Math.random()*Math.PI*2,t=5*Math.random()+3,o=colors[Math.floor(Math.random()*colors.length)],r=createLaser(laserStart,new THREE.Vector3(laserStart.x+Math.cos(e)*t,laserStart.y-2*Math.random(),laserStart.z+Math.sin(e)*t),o);lasers.push(r)}function animateLasers(){lasers.forEach((e=>{const t=.1*Math.random()-.05,o=.1*Math.random()-.05,r=.1*Math.random()-.05;e.geometry.attributes.position.array[0]+=t,e.geometry.attributes.position.array[1]+=o,e.geometry.attributes.position.array[2]+=r,e.geometry.attributes.position.array[3]+=t,e.geometry.attributes.position.array[4]+=o,e.geometry.attributes.position.array[5]+=r,e.geometry.attributes.position.needsUpdate=!0})),requestAnimationFrame(animateLasers)}animateLasers();const cloudTexture=(new THREE.TextureLoader).load("/textures/clouds.jpg"),cloudMaterial=new THREE.PointsMaterial({map:cloudTexture,size:.2,transparent:!0,opacity:.5}),cloudGeometry=new THREE.BufferGeometry,cloudPositions=[],numClouds=50;for(let e=0;e<50;e++)cloudPositions.push(2*Math.random()-1+5.3,2*Math.random()+4,2*Math.random()-1+4.5);cloudGeometry.setAttribute("position",new THREE.Float32BufferAttribute(cloudPositions,3));const clouds=new THREE.Points(cloudGeometry,cloudMaterial);scene.add(clouds),loader.load("/textures/dj5000.glb",(e=>{const t=e.scene;t.position.set(5,5,3.5),t.scale.set(.006,.006,.006),t.rotation.y=.16,scene.add(t)}),void 0,(e=>{console.error("An error occurred loading dj5000:",e)})),loader.load("/textures/infinity_jessie.glb",(e=>{const t=e.scene;t.position.set(5.3,4,4.5),t.scale.set(.008,.008,.008),t.rotation.y=THREE.MathUtils.degToRad(150),scene.add(t)}),void 0,(e=>{console.error("An error occurred loading infinity_jessie:",e)})),loader.load("/textures/pool_jacuzzi.glb",(e=>{const t=e.scene;t.scale.set(.025,.03,.025),t.position.set(12.25,2,8),t.rotation.y=Math.PI/2,scene.add(t);const o=new THREE.BufferGeometry,r=[];for(let e=0;e<50;e++)r.push(1.5*Math.random()-.75),r.push(.1*Math.random()+.1),r.push(1.5*Math.random()-.75);o.setAttribute("position",new THREE.Float32BufferAttribute(r,3));const a=new THREE.PointsMaterial({color:6750207,size:.2,transparent:!0,opacity:.8}),i=new THREE.Points(o,a);i.position.set(11.5,2.8,6.3),scene.add(i),function e(){!function(){const e=o.attributes.position.array;for(let t=0;t<e.length;t+=3)e[t+1]+=.002,e[t+1]>3&&(e[t+1]=0);o.attributes.position.needsUpdate=!0}(),renderer.render(scene,camera),requestAnimationFrame(e)}()}));const pointLight=new THREE.PointLight(16755336,1,10);pointLight.position.set(0,2,0),pointLight.castShadow=!0,scene.add(pointLight);const ambientLight=new THREE.AmbientLight(16777215,.3);scene.add(ambientLight);const couchMaterial=new THREE.MeshStandardMaterial({color:6908265}),couchBase=new THREE.Mesh(new THREE.BoxGeometry(3,.3,1),couchMaterial);couchBase.position.set(1,.2,2),scene.add(couchBase);const backrestMaterial=new THREE.MeshStandardMaterial({color:6908265}),backrest=new THREE.Mesh(new THREE.BoxGeometry(3,.5,.2),backrestMaterial);backrest.position.set(1,.6,2.4),scene.add(backrest);const armrestGeometry=new THREE.BoxGeometry(.2,.5,1),armrest1=new THREE.Mesh(armrestGeometry,couchMaterial),armrest2=armrest1.clone();armrest1.position.set(-.4,.45,2),armrest2.position.set(2.4,.45,2),scene.add(armrest1,armrest2);const cushionMaterial=new THREE.MeshStandardMaterial({color:16737792}),cushionGeometry=new THREE.BoxGeometry(1.3,.25,.9),cushion1=new THREE.Mesh(cushionGeometry,cushionMaterial),cushion2=new THREE.Mesh(cushionGeometry,cushionMaterial);cushion1.position.set(.3,.4,2),cushion2.position.set(1.7,.4,2),scene.add(cushion1,cushion2);const footrestMaterial=new THREE.MeshStandardMaterial({color:6908265}),footrest=new THREE.Mesh(new THREE.BoxGeometry(1,.3,1),footrestMaterial);footrest.position.set(1.9,.2,1),scene.add(footrest);const tableMaterial=new THREE.MeshStandardMaterial({color:6908265}),table=new THREE.Mesh(new THREE.BoxGeometry(1.6,.3,.9),tableMaterial);table.position.set(0,.45,0),scene.add(table);const legGeometry=new THREE.CylinderGeometry(.05,.05,.45,24),legMaterial=new THREE.MeshStandardMaterial({color:3355443}),legs=[],legPositions=[{x:-.7,z:.4},{x:.7,z:.4},{x:-.7,z:-.4},{x:.7,z:-.4}];for(let e=0;e<4;e++){const t=new THREE.Mesh(legGeometry,legMaterial);t.position.set(legPositions[e].x,.225,legPositions[e].z),legs.push(t)}scene.add(...legs);const photoGeometry=new THREE.PlaneGeometry(1.5,1),photoMaterial=new THREE.MeshStandardMaterial({map:photoTexture,side:THREE.DoubleSide,roughness:.5,metalness:.2}),photo=new THREE.Mesh(photoGeometry,photoMaterial);photo.scale.set(.5,.5,1),photo.position.set(1.7,1.6,-2.4),photo.rotation.y=Math.PI/100,scene.add(photo);const frameGeometry=new THREE.PlaneGeometry(1.6,1.1),frameMaterial=new THREE.MeshStandardMaterial({emissive:getRandomNeonColor(),emissiveIntensity:.8,roughness:.5,metalness:.2,side:THREE.DoubleSide});function getRandomNeonColor(){const e=[3800852,16713530,1026559,16384255,16774912];return e[Math.floor(Math.random()*e.length)]}const light=new THREE.PointLight(getRandomNeonColor(),1.5,10);function changeLightColor(){light.color.set(getRandomNeonColor())}light.position.set(1.7,1.6,-2.8),scene.add(light),setInterval(changeLightColor,2e3);let gameBoy=null,iphone=null;const mouse=new THREE.Vector2,raycaster=new THREE.Raycaster,popupElement=document.createElement("div");popupElement.style.position="absolute",popupElement.style.padding="10px",popupElement.style.backgroundColor="rgba(0, 0, 0, 0.7)",popupElement.style.color="white",popupElement.style.borderRadius="5px",popupElement.style.display="none",popupElement.style.maxWidth="90%",popupElement.style.wordWrap="break-word",popupElement.style.zIndex="1000",document.body.appendChild(popupElement);const iframe=document.createElement("iframe");iframe.style.position="absolute",iframe.style.width=window.innerWidth<600?"90%":"80%",iframe.style.height=window.innerWidth<600?"70%":"80%",iframe.style.border="none",iframe.style.display="none",iframe.style.zIndex="1001",document.body.appendChild(iframe);const closeButton=document.createElement("button");function getMousePosition(e){let t=e.clientX||e.touches[0].clientX,o=e.clientY||e.touches[0].clientY;return{x:t/window.innerWidth*2-1,y:-o/window.innerHeight*2+1}}closeButton.innerText="EXIT",closeButton.style.position="absolute",closeButton.style.top="10px",closeButton.style.left="10px",closeButton.style.backgroundColor="rgba(0, 0, 0, 0.7)",closeButton.style.color="white",closeButton.style.border="none",closeButton.style.padding="15px",closeButton.style.borderRadius="5px",closeButton.style.cursor="pointer",closeButton.style.fontSize="16px",closeButton.style.zIndex="1002",closeButton.style.display="none",document.body.appendChild(closeButton),loader.load("/textures/game_boy.glb",(e=>{gameBoy=e.scene,gameBoy.position.set(.3,.64,-.1),gameBoy.scale.set(1.5,1.5,1.5),gameBoy.rotation.x=-Math.PI/2,gameBoy.rotation.z=Math.PI/8,scene.add(gameBoy)})),loader.load("/textures/free_iphone.glb",(e=>{iphone=e.scene,iphone.position.set(1.3,.2,1),iphone.scale.set(.001,.001,.001),iphone.rotation.x=-Math.PI/6,iphone.rotation.z=Math.PI/3,scene.add(iphone)}));let helicopter,helicopterMixer,chess=null;function onMove(e){const{x:t,y:o}=getMousePosition(e);if(mouse.set(t,o),raycaster.setFromCamera(mouse,camera),gameBoy||iphone||chess){const t=gameBoy?raycaster.intersectObject(gameBoy,!0):[],o=iphone?raycaster.intersectObject(iphone,!0):[],r=chess?raycaster.intersectObject(chess,!0):[];t.length>0?(popupElement.style.display="block",popupElement.innerHTML="Game Boy",popupElement.style.left=`${e.clientX+window.scrollX+10}px`,popupElement.style.top=`${e.clientY+window.scrollY+10}px`):o.length>0?(popupElement.style.display="block",popupElement.innerHTML="iPad",popupElement.style.left=`${e.clientX+window.scrollX+10}px`,popupElement.style.top=`${e.clientY+window.scrollY+10}px`):r.length>0?(popupElement.style.display="block",popupElement.innerHTML="Play Chess",popupElement.style.left=`${e.clientX+window.scrollX+10}px`,popupElement.style.top=`${e.clientY+window.scrollY+10}px`):popupElement.style.display="none"}}function onClick(e){const{x:t,y:o}=getMousePosition(e);if(mouse.set(t,o),raycaster.setFromCamera(mouse,camera),gameBoy||iphone||chess){const e=gameBoy?raycaster.intersectObject(gameBoy,!0):[],t=iphone?raycaster.intersectObject(iphone,!0):[],o=chess?raycaster.intersectObject(chess,!0):[];e.length>0?(iframe.src="https://marioallstars.vercel.app",iframe.style.display="block",iframe.style.left=(window.innerWidth-iframe.offsetWidth)/2+"px",iframe.style.top=(window.innerHeight-iframe.offsetHeight)/2+"px",closeButton.style.display="block",enableOutsideClickListener()):t.length>0?(iframe.src="https://imac.jessejesse.com",iframe.style.display="block",iframe.style.left=(window.innerWidth-iframe.offsetWidth)/2+"px",iframe.style.top=(window.innerHeight-iframe.offsetHeight)/2+"px",closeButton.style.display="block",enableOutsideClickListener()):o.length>0&&(iframe.src="https://www.chessonlinefree.com/play-chess-online#google_vignette",iframe.style.display="block",iframe.style.left=(window.innerWidth-iframe.offsetWidth)/2+"px",iframe.style.top=(window.innerHeight-iframe.offsetHeight)/2+"px",closeButton.style.display="block",enableOutsideClickListener())}}function enableOutsideClickListener(){window.addEventListener("click",outsideClick)}function outsideClick(e){iframe.contains(e.target)||closeButton.contains(e.target)||(iframe.style.display="none",closeButton.style.display="none",window.removeEventListener("click",outsideClick))}loader.load("/textures/chess_coines.glb",(e=>{chess=e.scene,chess.position.set(-.3,.8,-2),chess.scale.set(.03,.03,.03),chess.rotation.x=-Math.PI/55,chess.rotation.z=Math.PI/55,chess.rotation.y=Math.PI/2,scene.add(chess)})),closeButton.addEventListener("click",(()=>{iframe.style.display="none",closeButton.style.display="none",window.removeEventListener("click",outsideClick)})),window.addEventListener("mousemove",onMove,!1),window.addEventListener("click",onClick,!1),window.addEventListener("touchmove",(e=>{e.preventDefault(),onMove(e)}),{passive:!1}),window.addEventListener("touchstart",(e=>{e.preventDefault(),onClick(e)}),{passive:!1}),window.addEventListener("resize",(()=>{iframe.style.width=window.innerWidth<600?"90%":"80%",iframe.style.height=window.innerWidth<600?"70%":"80%"})),loader.load("/textures/macbook.glb",(e=>{const t=e.scene;t.scale.set(.2,.2,.2),t.position.set(-.3,.6,.2),scene.add(t)}),void 0,(e=>{console.error("An error occurred while loading the MacBook model:",e)}));let helicopterRotationSpeed=.1;function animateHelicopter(){if(requestAnimationFrame(animateHelicopter),helicopterMixer&&clock){const e=clock.getDelta();helicopterMixer.update(e)}renderer.render(scene,camera)}loader.load("/textures/apache_gunship.glb",(e=>{if(helicopter=e.scene,helicopter.position.set(-10,4.6,-2),helicopter.scale.set(.5,.5,.5),helicopter.rotation.set(0,Math.PI,0),scene.add(helicopter),console.log("Helicopter loaded successfully!"),e.animations.length>0){helicopterMixer=new THREE.AnimationMixer(helicopter);const t=helicopterMixer.clipAction(e.animations[0]);t.loop=THREE.LoopRepeat,t.play()}animateHelicopter()}),void 0,(e=>console.error("Error loading the helicopter model:",e)));const models=[{url:"/textures/mountain_bike.glb",position:[11,.6,6.2],scale:[.8,.8,.8],rotationY:18},{url:"/textures/spellbound_mailbox.glb",position:[19,.6,-18.5],scale:[.3,.3,.3],rotationY:1},{url:"/textures/darts.glb",position:[2.5,1.8,2.95],scale:[.8,.8,.8]},{url:"/textures/bar_sign_board.glb",position:[5.8,1.4,7.3],scale:[-.02,.02,.02],rotationY:3.12},{url:"/textures/apple_watch.glb",position:[.1,.61,.2],scale:[.06,.06,.06],rotationY:Math.PI/18,rotationX:-Math.PI/18},{url:"/textures/aviators.glb",position:[2,.6,2],scale:[9e-4,9e-4,9e-4],rotationZ:Math.PI/55,rotationY:Math.PI/-2,rotationX:Math.PI/-55},{url:"/textures/modern_kitchen.glb",position:[6,.1,5.8],scale:[.4,.4,.4],rotationZ:Math.PI/60,rotationY:Math.PI,rotationX:0},{url:"/textures/vape.glb",position:[.3,.61,.2],scale:[.2,.2,.2],rotationY:1},{url:"/textures/railing.glb",position:[27.2,1.6,-5.8],scale:[.5,.4,.5],rotationY:3.15},{url:"/textures/railing.glb",position:[27.2,1.6,-.8],scale:[.5,.4,.5],rotationY:3.15},{url:"/textures/a10.glb",position:[2.2,10.6,-15.8],scale:[.07,.07,.07],rotationY:2,rotationX:-2},{url:"/textures/the_piano.glb",position:[2.1,3,4.4],scale:[.4,.4,.4],rotationY:-14.15},{url:"/textures/railing.glb",position:[-4.5,1.6,-23.5],scale:[.5,.4,.5],rotationY:-14.15},{url:"/textures/railing.glb",position:[-9.5,1.6,-23],scale:[.5,.4,.5],rotationY:-14.15},{url:"/textures/sofa.glb",position:[-.5,3.1,2.5],scale:[1.4,1.4,1.4],rotationY:-12.55},{url:"/textures/up_window.glb",position:[-2.4,1,3.8],scale:[.5,.5,.5],rotationY:-14.1},{url:"/textures/up_window.glb",position:[-2.4,1,6.3],scale:[.5,.5,.5],rotationY:-14.1},{url:"/textures/up_window.glb",position:[6.5,1,-2.7],scale:[.5,.5,.5],rotationY:-153.95},{url:"/textures/up_window.glb",position:[1.5,1,-2.7],scale:[.5,.5,.5],rotationY:-153.95},{url:"/textures/door_arch.glb",position:[4.5,.1,-2.7],scale:[.5,.5,.5],rotationY:-153.95},{url:"/textures/walkway_stone.glb",position:[4.5,.1,-3.3],scale:[.5,.5,.5]},{url:"/textures/walkway_stone.glb",position:[5.5,.1,-3.3],scale:[.5,.5,.5]},{url:"/textures/walkway_stone.glb",position:[6.5,.1,-3.3],scale:[.5,.5,.5]},{url:"/textures/walkway_stone.glb",position:[7.5,.1,-3.3],scale:[.5,.5,.5]},{url:"/textures/up_window.glb",position:[6,1,7.6],scale:[.5,.5,.5],rotationY:-153.95},{url:"/textures/up_window.glb",position:[7.5,1,1],scale:[.6,.6,.6],rotationY:-174.3},{url:"/textures/me.glb",position:[8.2,1.5,1],scale:[.4,.4,.4],rotationY:Math.PI/-2},{url:"/textures/pillar.glb",position:[12.5,.15,8.2],scale:[.4,.43,.4],rotationY:-174.3},{url:"/textures/basketball_hoop.glb",position:[11,1,2],scale:[.5,.5,.5],rotationY:-174.3},{url:"/textures/radio_tower_antenna.glb",position:[-14,0,4.5],scale:[.5,.5,.5],rotationY:-174.3},{url:"/textures/pillar.glb",position:[12.5,.15,2.8],scale:[.4,.43,.4],rotationY:-174.3},{url:"/textures/pillar.glb",position:[7,.15,8.2],scale:[.4,.43,.4],rotationY:-174.3},{url:"/textures/humvee.glb",position:[-13,.1,6],scale:[.004,.004,.004],rotationY:-12.55},{url:"/textures/retro_tv.glb",position:[.9,2,4.5],scale:[.06,.06,.06],rotationY:-40.9},{url:"/textures/ps5_customized.glb",position:[-1,.03,-2],scale:[.3,.3,.3],rotationY:0},{url:"/textures/kitchen_table.glb",position:[.4,.6,-2.4],scale:[.01,.01,.01],rotationY:0},{url:"/textures/wool_rug.glb",position:[5.2,.1,1],scale:[.02,.02,.02],rotationY:8.1},{url:"/textures/playstation_shapes.glb",position:[-.2,.8,-2.4],scale:[.1,.1,.1],rotationY:0},{url:"/textures/donnie.glb",position:[-2.2,0,-1.2],scale:[.4,.4,.4],rotationY:Math.PI/2},{url:"/textures/runway.glb",position:[-21,0,-8.2],scale:[.01,.01,.03],rotationY:Math.PI/2.4},{url:"/textures/runway.glb",position:[-17.8,.01,-20],scale:[.01,.01,.03],rotationY:Math.PI/2.4},{url:"/textures/a10.glb",position:[-17.5,4.5,-20],scale:[.2,.2,.2],rotationY:-1.8,rotationX:.3},{url:"/textures/bookshelf_speaker.glb",position:[-2.4,1.75,-1.6],scale:[.6,.6,.6],rotationY:Math.PI/2},{url:"/textures/chest_speaker.glb",position:[-2.43,2.15,-1.6],scale:[4.5,4.5,4.5],rotationY:Math.PI/-2},{url:"/textures/babys_highchair.glb",position:[.1,0,-1.9],scale:[.3,.3,.3],rotationY:Math.PI/2},{url:"/textures/red_energy.glb",position:[-2.3,1.06,-.3],scale:[1.5,1.5,1.5],rotationY:Math.PI/4},{url:"/textures/rug.glb",position:[.1,0,1],scale:[.9,.9,.9],rotationY:Math.PI/40},{url:"/textures/stuff_Bear.glb",position:[-1.75,.05,2],scale:[1.6,1.6,1.6],rotationY:Math.PI/3},{url:"/textures/pirate_flag.glb",position:[13,.01,2.5],scale:[.02,.02,.02],rotationY:Math.PI/-2.3},{url:"/textures/stairs.glb",position:[7,3,4.9],scale:[.4,.4,.4],rotationY:Math.PI/-52},{url:"/textures/da_stairs.glb",position:[7,.03,2.5],scale:[1,1,1]},{url:"/textures/wooden_railing.glb",position:[10.1,3.3,2.5],scale:[.01,.01,.01],rotationY:Math.PI},{url:"/textures/wooden_railing.glb",position:[12,3.3,2.5],scale:[.01,.01,.01],rotationY:Math.PI},{url:"/textures/bullseye.glb",position:[-1.8,.03,-5.5],scale:[.007,.007,.007]},{url:"/textures/wooden_railing.glb",position:[4.9,3.3,8.6],scale:[.01,.01,.01],rotationY:Math.PI/150},{url:"/textures/wooden_railing.glb",position:[8.6,3.3,8.6],scale:[.01,.01,.01],rotationY:Math.PI/150},{url:"/textures/wooden_railing.glb",position:[6.8,3.3,8.6],scale:[.01,.01,.01],rotationY:Math.PI/150},{url:"/textures/wooden_railing.glb",position:[10.4,3.3,8.6],scale:[.01,.01,.01],rotationY:Math.PI/150},{url:"/textures/wooden_railing.glb",position:[12.2,3.3,8.6],scale:[.01,.01,.01],rotationY:Math.PI/150},{url:"/textures/wooden_railing.glb",position:[13,3.3,5.6],scale:[.01,.01,.01],rotationY:Math.PI/2},{url:"/textures/wooden_railing.glb",position:[13,3.3,3.6],scale:[.01,.01,.01],rotationY:Math.PI/2},{url:"/textures/wooden_railing.glb",position:[13,3.3,7.6],scale:[.01,.01,.01],rotationY:Math.PI/2},{url:"/textures/tree.glb",position:[-3.8,.03,-5.5],scale:[.003,.003,.003],rotationY:Math.PI/-1.3},{url:"/textures/tree.glb",position:[1.1,.03,-6],scale:[.0024,.0028,.0024],rotationY:Math.PI/-1.3},{url:"/textures/tree.glb",position:[15.5,.05,1.5],scale:[.0024,.0028,.0024],rotationY:Math.PI/-1.3},{url:"/textures/tree.glb",position:[14.5,.05,3.5],scale:[.0024,.0028,.0024],rotationY:Math.PI/-1},{url:"/textures/floral_cluster.glb",position:[12,.03,0],scale:[2.5,2.5,2.5],rotationY:Math.PI/2},{url:"/textures/floral_cluster.glb",position:[12,.03,2.5],scale:[2.5,2.5,2.5],rotationY:Math.PI/2},{url:"/textures/floral_cluster.glb",position:[7.7,.03,2],scale:[2.5,2.5,2.5],rotationY:Math.PI/2},{url:"/textures/floral_cluster.glb",position:[8,.03,0],scale:[2.5,2.5,2.5],rotationY:Math.PI/2},{url:"/textures/floral_cluster.glb",position:[8,.03,2],scale:[2.5,2.5,2.5],rotationY:Math.PI/2},{url:"/textures/floral_cluster.glb",position:[12,.03,-2.5],scale:[2.5,2.5,2.5],rotationY:Math.PI/2},{url:"/textures/floral_cluster.glb",position:[12,.03,-1],scale:[2.5,2.5,2.5],rotationY:Math.PI/2},{url:"/textures/floral_cluster.glb",position:[12,.03,-3.5],scale:[2.5,2.5,2.5],rotationY:Math.PI/2},{url:"/textures/floral_cluster.glb",position:[12,.03,-3.5],scale:[2.5,2.5,2.5],rotationY:Math.PI/2},{url:"/textures/floral_cluster.glb",position:[7.5,.03,-4],scale:[2.5,2.5,2.5],rotationY:Math.PI/2},{url:"/textures/floral_cluster.glb",position:[8,.03,-4],scale:[2.5,2.5,2.5],rotationY:Math.PI/2},{url:"/textures/samsung_tv_remote_control.glb",position:[.5,.6,2],scale:[.1,.1,.1],rotationX:-Math.PI/8,rotationZ:Math.PI/8},{url:"/textures/chinese_stairs.glb",position:[3.8,.1,1.4],scale:[.003,.003,.003],rotationY:Math.PI/-2},{url:"/textures/hoodie.glb",position:[2.3,.5,2],scale:[.8,.8,.8],rotationX:-Math.PI/2,rotationZ:Math.PI/8},{url:"/textures/woodtable.glb",position:[1.9,.01,-2.2],scale:[.5,.5,.5],rotationZ:Math.PI/84},{url:"/textures/candy_real.glb",position:[.8,.36,-1.1],scale:[.1,.1,.1],rotationZ:Math.PI/80},{url:"/textures/bmx.glb",position:[11,.6,4.5],scale:[.3,.3,.3],rotationY:Math.PI/10},{url:"/textures/pool_table.glb",position:[-1,.1,6],scale:[.01,.01,.01],rotationY:Math.PI/3},{url:"/textures/bronco.glb",position:[.6,.65,-2.2],scale:[.004,.004,.004],rotationX:-Math.PI/55,rotationZ:Math.PI/55,rotationY:Math.PI/2},{url:"/textures/flash_light.glb",position:[.3,.65,-2],scale:[.9,.9,.9],rotationX:-Math.PI/55,rotationZ:Math.PI/55,rotationY:Math.PI/2},{url:"/textures/chess_coines.glb",position:[-.3,.8,-2],scale:[.03,.03,.03],rotationX:-Math.PI/55,rotationZ:Math.PI/55,rotationY:Math.PI/2},{url:"/textures/coffe_maker.glb",position:[.7,.75,-.1],scale:[.01,.01,.01],rotationY:Math.PI/5},{url:"/textures/c_cup.glb",position:[.5,.65,-.1],scale:[.03,.03,.03],rotationY:Math.PI/5},{url:"/textures/d_tags.glb",position:[.6,.63,.2],scale:[2e-4,2e-4,2e-4],rotationY:Math.PI/5},{url:"/textures/pirate_poster.glb",position:[-1.7,.9,-2.5],scale:[.2,.2,.2],rotationY:Math.PI/-2},{url:"/textures/cyber_garage.glb",position:[6,-1.9,1.4],scale:[.5,.5,.5],rotationY:Math.PI/1},{url:"/textures/helipad.glb",position:[-16,0,-1.5],scale:[.003,.003,.003],rotationY:Math.PI/1},{url:"/textures/modern_kitchen.glb",position:[6.2,.1,5.8],scale:[.4,.4,.4],rotationZ:Math.PI/60,rotationY:Math.PI,rotationX:0},{url:"/textures/metallic_garden_table.glb",position:[2.8,.1,5.5],scale:[.03,.03,.03],rotationX:0,rotationY:Math.PI/2,rotationZ:0},{url:"/textures/fire_flower.glb",position:[2.8,1.3,5.5],scale:[.05,.05,.05],rotationX:0,rotationY:Math.PI/4,rotationZ:0},{url:"/textures/table21.glb",position:[.4,3.1,4.5],scale:[1,1,1],rotationY:Math.PI/3},{url:"/textures/stairs.glb",position:[3.8,2.5,6.5],scale:[.3,.3,.3],rotationY:Math.PI},{url:"/textures/bottles.glb",position:[.4,3.35,4.5],scale:[.005,.005,.005],rotationY:Math.PI/3},{url:"/textures/jj.jpeg",position:[-1.4,.9,-2.5],scale:[.2,.2,.2],rotationY:Math.PI/-2},{url:"/textures/frame.glb",position:[1.7,1.6,-2.55],scale:[5.4,3.2,5.4],rotationY:Math.PI/-100},{url:"/textures/black_pool.glb",position:[5,3.1,7.8],scale:[.01,.01,.01],rotationY:Math.PI/150},{url:"/textures/black_pool.glb",position:[7,3.1,7.8],scale:[.01,.01,.01],rotationY:Math.PI/150},{url:"/textures/starlink_satellite_dish.glb",position:[8.5,3.1,7.8],scale:[.005,.005,.005],rotationY:Math.PI/150},{url:"/textures/camping_fox.glb",position:[13,-.6,5.8],scale:[3.5,3.5,3.5],rotationY:Math.PI/2},{url:"/textures/flower_bed.glb",position:[6,.1,-5.5],scale:[.3,.3,.3],rotationY:Math.PI/2}];loader.setCrossOrigin("anonymous"),loader.load("https://pub-c1de1cb456e74d6bbbee111ba9e6c757.r2.dev/denver_broncos.glb",(e=>{const t=e.scene;t.scale.set(.3,.3,.3),t.position.set(10,1.7,3),t.rotation.y=Math.PI,scene.add(t)}),void 0,(e=>{console.error("An error occurred while loading the GLB model:",e)}));let flowerModel,mixer,model,object={url:"/textures/dji_mini_2.glb",position:[-1.5,.5,-2],scale:[1.4,.8,1.2],rotationY:0};function animateFlower(){requestAnimationFrame(animateFlower),mixer&&mixer.update(.01),renderer.render(scene,camera)}function animateObject(){model&&(model.position.y=object.position[1]+.4*Math.sin(.5*Date.now()*.001),model.rotation.y+=.02),requestAnimationFrame(animateObject)}loader.load("/textures/simple_flower.glb",(e=>{if(console.log("Flower model loaded successfully!"),flowerModel=e.scene,flowerModel.position.set(6,1.5,-5.5),flowerModel.scale.set(.2,.2,.2),scene.add(flowerModel),console.log("Animations in the model:",e.animations),e.animations.length>0){mixer=new THREE.AnimationMixer(flowerModel);mixer.clipAction(e.animations[0]).play()}}),void 0,(e=>{console.error("Error loading the GLTF model:",e)})),animateObject(),(new GLTFLoader).load(object.url,(e=>{model=e.scene,model.scale.set(...object.scale),model.position.set(...object.position),object.rotationY&&(model.rotation.y=object.rotationY),scene.add(model)}),void 0,(e=>{console.error(`An error occurred while loading the model at ${object.url}:`,e)}));const pretzelPositions=[{x:-1.6,y:.05,z:-1.6},{x:-1.4,y:.05,z:-1.4},{x:-1.2,y:.05,z:-1.2}];function createSteamEffect(e){const t=new THREE.BufferGeometry,o=new THREE.PointsMaterial({color:16777215,size:.05,transparent:!0,opacity:.6}),r=[];for(let t=0;t<200;t++){const t=e.x+.5*(Math.random()-.5),o=e.y+1.5*Math.random(),a=e.z+.5*(Math.random()-.5);r.push(t,o,a)}t.setAttribute("position",new THREE.Float32BufferAttribute(r,3));const a=new THREE.Points(t,o);scene.add(a),function o(){const r=t.attributes.position.array;for(let t=1;t<r.length;t+=3)r[t]+=.01,r[t]>e.y+1.5&&(r[t]=e.y);t.attributes.position.needsUpdate=!0,requestAnimationFrame(o)}()}pretzelPositions.forEach((e=>{(new GLTFLoader).load("/textures/pretzel.glb",(t=>{const o=t.scene;o.scale.set(.05,.05,.05),o.position.set(e.x,e.y,e.z),scene.add(o)}))})),loader.load("/textures/window.glb",(e=>{const t=e.scene;t.position.set(-2.3,.5,.03),t.scale.set(.08,.06,.05),t.rotation.set(0,Math.PI/2,0),scene.add(t),createSteamEffect(t.position)}),void 0,(e=>{console.error("An error occurred while loading the window.glb model:",e)})),models.forEach((({url:e,position:t,scale:o,rotationY:r,rotationX:a,rotationZ:i})=>{loader.load(e,(n=>{const s=n.scene;if(s.scale.set(...o),s.position.set(...t),r&&(s.rotation.y=r),a&&(s.rotation.x=a),i&&(s.rotation.z=i),"/textures/flash_light.glb"===e){const e=new THREE.SpotLight(16777215,5);e.position.set(0,2,0),e.angle=Math.PI/4,e.penumbra=.5,e.distance=5,e.castShadow=!0,e.visible=!1,scene.add(e),window.addEventListener("mousemove",(t=>{const o=new THREE.Vector2(t.clientX/window.innerWidth*2-1,-t.clientY/window.innerHeight*2+1),r=new THREE.Raycaster;r.setFromCamera(o,camera);r.intersectObject(s,!0).length>0?(console.log("Light ON"),e.visible=!0):(console.log("Light OFF"),e.visible=!1)}))}scene.add(s)}),void 0,(t=>{console.error(`An error occurred while loading the model at ${e}:`,t)}))}));const video=document.createElement("video");video.src="https://jr-three.vercel.app/textures/video.mp4",video.crossOrigin="anonymous",video.loop=!0,video.muted=!0,video.autoplay=!0,video.playsInline=!0,video.addEventListener("canplaythrough",(()=>{console.log("Video ready to play"),video.play().catch((e=>console.error("Video play error:",e)))})),video.addEventListener("error",(e=>{console.error("Video error:",e)}));const videoTexture=new THREE.VideoTexture(video);videoTexture.minFilter=THREE.LinearFilter,videoTexture.magFilter=THREE.LinearFilter,videoTexture.format=THREE.RGBFormat;const videoMaterial=new THREE.MeshBasicMaterial({map:videoTexture}),videoScreen=new THREE.Mesh(new THREE.PlaneGeometry(2,1),videoMaterial);videoScreen.position.set(.1,1.5,-2.4);const borderMaterial=new THREE.MeshBasicMaterial({color:0}),borderThickness=.1,borderGeometry=new THREE.PlaneGeometry(2.1,1.1),border=new THREE.Mesh(borderGeometry,borderMaterial);border.position.copy(videoScreen.position),border.position.z-=.01,scene.add(border),scene.add(videoScreen);const windowMaterial=new THREE.MeshBasicMaterial({map:windowTexture}),windowPlane=new THREE.Mesh(new THREE.PlaneGeometry(2,1.5),windowMaterial);windowPlane.position.set(-2.4,1.65,0),windowPlane.rotation.y=Math.PI/2,scene.add(windowPlane),window.addEventListener("resize",(()=>{const e=window.innerWidth,t=window.innerHeight;camera.aspect=e/t,camera.updateProjectionMatrix(),renderer.setSize(e,t)}));const clock=new THREE.Clock;function animate(){const e=clock.getDelta();controls.update(e),video.readyState>=video.HAVE_CURRENT_DATA&&(videoTexture.needsUpdate=!0),renderer.render(scene,camera),requestAnimationFrame(animate)}animate(),console.log("Scene:",scene),console.log("Camera:",camera),console.log("Renderer:",renderer);export default ThreeScene;







